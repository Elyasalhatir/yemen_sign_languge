<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ØºØ© Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø§Ù„ÙŠÙ…Ù†ÙŠØ© - Ù…ØªØ±Ø¬Ù… Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª | Yemeni Sign Language Recognizer</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Cairo:wght@300;400;600;700&display=swap"
        rel="stylesheet">

    <!-- HTTPS Redirect for Mobile Camera Access -->
    <script>
        if (location.protocol !== 'https:' && location.hostname !== 'localhost' && location.hostname !== '127.0.0.1') {
            location.replace('https:' + window.location.href.substring(window.location.protocol.length));
        }
    </script>

    <!-- Styles -->
    <link rel="stylesheet" href="recognizer-style.css">

    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.10.0/dist/tf.min.js"></script>

    <!-- MediaPipe -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/holistic/holistic.js" crossorigin="anonymous"></script>
</head>

<body>
    <header>
        <div style="position: absolute; top: 20px; left: 20px; z-index: 1000; display: flex; gap: 10px;">
            <a href="welcome.html" class="back-link" style="position: relative; top: 0; left: 0;">â† Back | Ø¹ÙˆØ¯Ø©</a>

            <button id="camera-switch-btn" onclick="switchCamera()"
                style="background: rgba(0, 242, 234, 0.2); border: 1px solid #00f2ea; color: white; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; display: none; align-items: center; justify-content: center; font-size: 1.2rem;">
                ğŸ“·
            </button>
        </div>
        <h1>Sign Recognizer <span class="ar-title">Ù…ØªØ±Ø¬Ù… Ø§Ù„Ø¥Ø´Ø§Ø±Ø©</span></h1>
        <p class="subtitle">Speak with your hands | ØªØ­Ø¯Ø« Ø¨ÙŠØ¯ÙŠÙƒ</p>
    </header>

    <div class="content-wrapper">
        <!-- Video Section -->
        <div class="video-section">
            <div class="video-frame">
                <video id="input_video" style="display: none;"></video>
                <canvas id="output_canvas"></canvas>
                <div class="loading-overlay" id="loading">
                    <div class="spinner"></div>
                    <p>Loading AI Model...</p>
                </div>
            </div>

            <div class="status-indicator">
                <div class="status-dot" id="status-dot"></div>
                <span id="status-text">Loading...</span>
            </div>
        </div>

        <!-- Result Section -->
        <div class="result-section">

            <!-- Recognition Card -->
            <div class="result-card">
                <h2>Recognized Word | Ø§Ù„ÙƒÙ„Ù…Ø©</h2>
                <div class="word-display">
                    <div class="word-en" id="word-en">Waiting...</div>
                    <div class="word-ar" id="word-ar">...</div>
                </div>
                <div class="confidence-bar">
                    <div class="confidence-fill" id="conf-fill" style="width: 0%"></div>
                </div>
                <div class="conf-text" id="conf-text">0% Confidence</div>
            </div>

            <!-- Sentence History -->
            <div class="history-card">
                <h3>Sentence | Ø§Ù„Ø¬Ù…Ù„Ø©</h3>
                <div class="sentence-box" id="sentence-box">
                    Waiting for signs...
                </div>
                <div class="controls">
                    <button class="btn-action btn-speak" onclick="speakSentence()">
                        ğŸ”Š Speak | Ù†Ø·Ù‚
                    </button>
                    <button class="btn-action btn-ai" onclick="formSentenceAI()">
                        âœ¨ AI Sentence
                    </button>
                    <button class="btn-action btn-clear" onclick="clearSentence()">
                        ğŸ—‘ Clear | Ù…Ø³Ø­
                    </button>
                </div>
            </div>

            <!-- Instructions -->
            <div class="info-card">
                <p>ğŸ’¡ <strong>Tip:</strong> Ensure good lighting and keep your hands visible within the frame.</p>
            </div>

        </div>
    </div>

    <!-- Logic Script -->
    <script src="src/RecognizerManager.js"></script>
</body>

</html>